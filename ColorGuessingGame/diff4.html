<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Color Guessing Game</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="container">
      <h1>
        <span id="number"></span>
      </h1>

      <ul id="list">
        <li id="button1"></li>
        <li id="button2"></li>
        <li id="button3"></li>
        <li id="button4"></li>
      </ul>

      <h2 id="result">Guess the color!</h2>

      <p class="tiles">
        <span class="diff">Difficulty:</span>
        <a href="./diff2.html">2</a>
        <a href="./defaultDiff.html">3</a>
        <strong>4</strong>
        <a href="./diff5.html">5</a>
        <a href="./diff6.html">6</a>
      </p>

      <div class="center">
        <button id="restart">Restart</button>
      </div>

      <div class="homeButton">
        <a href="../index.html">
          <button style="opacity: 1; font-size: 32px" id="home">
            â¬…Click here to go back
          </button>
        </a>
      </div>
    </div>

    <script>
      function generateColor() {
        return "#" + Math.floor(Math.random() * 16777215).toString(16);
      }

      let color1 = generateColor();
      let color2 = generateColor();
      let color3 = generateColor();
      let color4 = generateColor();

      let button1 = (document.getElementById("button1").style.background =
        color1);
      let button2 = (document.getElementById("button2").style.background =
        color2);
      let button3 = (document.getElementById("button3").style.background =
        color3);
      let button4 = (document.getElementById("button4").style.background =
        color4);
      const restart = document.getElementById("restart");
      restart.disabled = true;

      function generateWin() {
        var min = 0;
        var max = 3;
        var random = Math.floor(Math.random() * (max - min)) + min;

        if (random === 0) {
          color1 = generateColor();
          button1 = document.getElementById("button1").style.background =
            color1;
          document.getElementById("number").innerHTML = color1;
        } else if (random === 1) {
          color2 = generateColor();
          button2 = document.getElementById("button2").style.background =
            color2;
          document.getElementById("number").innerHTML = color2;
        } else if (random === 2) {
          color3 = generateColor();
          button3 = document.getElementById("button3").style.background =
            color3;
          document.getElementById("number").innerHTML = color3;
        } else if (random === 3) {
          color4 = generateColor();
          button4 = document.getElementById("button4").style.background =
            color4;
          document.getElementById("number").innerHTML = color4;
        }
      }

      generateWin();

      document
        .getElementById("button1")
        .addEventListener("click", function (e) {
          if (e.target && e.target.matches("li")) {
            if (color1 === document.getElementById("number").textContent) {
              document.getElementById("result").innerHTML =
                "That's the correct color. You win";
              document.getElementById("restart").style.opacity = 1;
              restart.disabled = false;
            } else {
              document.getElementById("button1").style.opacity = 0;
              document.getElementById("result").innerHTML =
                "That's the wrong color. Try again";
            }
          }
        });

      document
        .getElementById("button2")
        .addEventListener("click", function (e) {
          if (e.target && e.target.matches("li")) {
            if (color2 === document.getElementById("number").textContent) {
              document.getElementById("result").innerHTML =
                "That's the correct color. You win";
              document.getElementById("restart").style.opacity = 1;
              restart.disabled = false;
            } else {
              document.getElementById("button2").style.opacity = 0;
              document.getElementById("result").innerHTML =
                "That's the wrong color. Try again";
            }
          }
        });

      document
        .getElementById("button3")
        .addEventListener("click", function (e) {
          if (e.target && e.target.matches("li")) {
            if (color3 === document.getElementById("number").textContent) {
              document.getElementById("result").innerHTML =
                "That's the correct color. You win";
              document.getElementById("restart").style.opacity = 1;
              restart.disabled = false;
            } else {
              document.getElementById("button3").style.opacity = 0;
              document.getElementById("result").innerHTML =
                "That's the wrong color. Try again";
            }
          }
        });

      document
        .getElementById("button4")
        .addEventListener("click", function (e) {
          if (e.target && e.target.matches("li")) {
            if (color4 === document.getElementById("number").textContent) {
              document.getElementById("result").innerHTML =
                "That's the correct color. You win";
              document.getElementById("restart").style.opacity = 1;
              restart.disabled = false;
            } else {
              document.getElementById("button4").style.opacity = 0;
              document.getElementById("result").innerHTML =
                "That's the wrong color. Try again";
            }
          }
        });

      function restartGame() {
        document.getElementById("result").innerHTML = "Guess the color!";
        document.getElementById("button1").style.opacity = 1;
        document.getElementById("button2").style.opacity = 1;
        document.getElementById("button3").style.opacity = 1;
        document.getElementById("button4").style.opacity = 1;
        color1 = generateColor();
        color2 = generateColor();
        color3 = generateColor();
        color4 = generateColor();

        button1 = document.getElementById("button1").style.background = color1;
        button2 = document.getElementById("button2").style.background = color2;
        button3 = document.getElementById("button3").style.background = color3;
        button4 = document.getElementById("button4").style.background = color4;
      }

      document
        .getElementById("restart")
        .addEventListener("click", function (e) {
          if (e.target && e.target.matches("button")) {
            restart.disabled = true;
            document.getElementById("restart").style.opacity = 0;

            restartGame();
            generateWin();
          }
        });
    </script>
  </body>
</html>
